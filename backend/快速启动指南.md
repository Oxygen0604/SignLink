# SignLink åç«¯å¿«é€Ÿå¯åŠ¨æŒ‡å—

## ğŸš€ å¿«é€Ÿå¯åŠ¨ï¼ˆ3åˆ†é’Ÿï¼‰

### 1. æ£€æŸ¥ç¯å¢ƒ
```bash
# æ£€æŸ¥Pythonç‰ˆæœ¬ï¼ˆéœ€è¦3.8+ï¼‰
python --version
# æˆ–
python3 --version

# æ£€æŸ¥pip
pip --version
```

### 2. è¿›å…¥åç«¯ç›®å½•
```bash
cd backend/
```

### 3. å®‰è£…ä¾èµ–ï¼ˆæ¨èä½¿ç”¨ Conda ç¯å¢ƒï¼‰
```bash
# åˆ›å»ºæˆ–æ¿€æ´»ç¯å¢ƒ
conda create -n Signlink python=3.11
conda activate Signlink

# å®‰è£…ä¾èµ–ï¼ˆå¦‚é‡ç‰ˆæœ¬å…¼å®¹ï¼Œå¯æŒ‰ä¸‹åˆ—é”å®šï¼‰
pip install -r requirements.txt || true
pip install tensorflow==2.17.1 mediapipe fastapi==0.104.1 uvicorn==0.24.0 python-multipart python-dotenv
```

### 4. é…ç½® .env å¹¶å¯åŠ¨æœåŠ¡
```bash
# åœ¨ backend/.env ä¸­é…ç½®ï¼ˆç¤ºä¾‹ï¼‰
# APP_NAME=SignLink æ‰‹è¯­ç¿»è¯‘åç«¯
# APP_VERSION=1.0.0
# DEBUG=false
# HOST=0.0.0.0
# PORT=8000
# LOG_LEVEL=INFO
# LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s
# CORS_ORIGINS=http://localhost:3000,http://localhost:19006,http://127.0.0.1:19006,http://127.0.0.1:3000
# SIGNLANG_MODEL_PATH=
# SIGNLANG_LABELS_PATH=

# å¯åŠ¨ï¼ˆç›´æ¥ï¼‰
python -m uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
```

### 5. éªŒè¯æœåŠ¡
æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š
- **APIæ–‡æ¡£**: http://localhost:8000/docs

## ğŸ“¡ APIæµ‹è¯•

### ä½¿ç”¨Pythonæµ‹è¯•å®¢æˆ·ç«¯ï¼ˆæ¨èï¼‰
```bash
# ç¡®ä¿åç«¯æœåŠ¡æ­£åœ¨è¿è¡Œ
python test_flask_compat.py
```

### ä½¿ç”¨curlæµ‹è¯•ï¼ˆHTTP æ— å‰ç¼€ç«¯ç‚¹ï¼‰
```bash
# å®æ—¶è¯†åˆ«
curl -X POST http://localhost:8000/recognize/realtime \
  -H "Content-Type: application/json" \
  -d '{"image":"data:image/jpeg;base64,/9j/...","format":"jpeg","quality":80}'

# æ‰¹é‡è¯†åˆ«
curl -X POST http://localhost:8000/recognize/batch \
  -H "Content-Type: application/json" \
  -d '{"images":["data:image/jpeg;base64,/9j/..."],"format":"jpeg","quality":80}'

# å†å²è®°å½•
curl http://localhost:8000/recognize/history

# ä¿ç•™å…¼å®¹è·¯ç”±ï¼ˆå¯é€‰ï¼‰
curl -X POST http://localhost:8000/api/init
curl -X POST http://localhost:8000/api/predict -H "Content-Type: application/json" -d '{"image":"data:image/jpeg;base64,/9j/..."}'
```

### ä½¿ç”¨Postmanæµ‹è¯•ï¼ˆWebSocket ä¸ HTTPï¼‰
1. æ–°å»ºè¯·æ±‚
2. HTTP URL: `http://localhost:8000/recognize/realtime`
3. Headers: `Content-Type: application/json`
4. Body (raw JSON):
```json
{
  "image": "data:image/jpeg;base64,/9j/4AAQ...",
  "format": "jpeg",
  "quality": 80
}
```
5. WebSocket: è¿æ¥ `ws://localhost:8000/ws`ï¼Œå‘é€ï¼š
```json
{ "type": "image", "data": "data:image/jpeg;base64,/9j/..." }
```

## ğŸ“‚ ç¡®ä¿AIæ¨¡å‹å­˜åœ¨

### æ£€æŸ¥æ¨¡å‹æ–‡ä»¶
```bash
# æ£€æŸ¥æ¨¡å‹æ–‡ä»¶
ls -la ../ai_services/set_training_translation/sign_language_model.h5
ls -la ../ai_services/set_training_translation/sign_language_labels.json
```

### å¦‚æœæ¨¡å‹ä¸å­˜åœ¨
```bash
# è¿›å…¥AIæœåŠ¡ç›®å½•
cd ../ai_services/set_training_translation/

# æŒ‰READMEä¸­çš„æ­¥éª¤è®­ç»ƒæ¨¡å‹
python train_sign_language_model.py
```

## ğŸ› å¸¸è§é—®é¢˜

### 1. ç«¯å£è¢«å ç”¨
```
Error: [Errno 10048] Only one usage of each socket address
```
**è§£å†³**: å…³é—­å ç”¨8000ç«¯å£çš„ç¨‹åºï¼Œæˆ–æ›´æ”¹ç«¯å£
```bash
python -m uvicorn app.main:app --host 0.0.0.0 --port 8001
```

### 2. æ¨¡å‹åŠ è½½å¤±è´¥
```
æ¨¡å‹æ–‡ä»¶ä¸å­˜åœ¨: /path/to/model.h5
```
**è§£å†³**: è¿è¡Œæ¨¡å‹è®­ç»ƒè„šæœ¬ç”Ÿæˆæ¨¡å‹æ–‡ä»¶

### 3. ä¾èµ–å®‰è£…å¤±è´¥
```
ERROR: Could not install packages due to an OSError
```
**è§£å†³**: å‡çº§pipæˆ–ä½¿ç”¨é•œåƒ
```bash
pip install --upgrade pip
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple/
```

### 4. æƒé™é”™è¯¯ï¼ˆLinux/macOSï¼‰
```
Permission denied: './start.sh'
```
**è§£å†³**: æ·»åŠ æ‰§è¡Œæƒé™
```bash
chmod +x start.sh
```

### 5. å†…å­˜ä¸è¶³
```
OOM when allocating tensor
```
**è§£å†³**: å…³é—­å…¶ä»–ç¨‹åºï¼Œæˆ–ä½¿ç”¨æ›´å°çš„æ¨¡å‹

## ğŸ“– æ›´å¤šæ–‡æ¡£

- **è¯¦ç»†æ–‡æ¡£**: [README.md](./README.md)
- **APIæ¥å£**: http://localhost:8000/docs
- **é¡¹ç›®ä¸»é¡µ**: https://github.com/Oxygen0604/SignLink

## ğŸ’¬ è·å–å¸®åŠ©

- ğŸ“§ é‚®ç®±: [è”ç³»åç«¯å¼€å‘å›¢é˜Ÿ]
- ğŸ› é—®é¢˜åé¦ˆ: [GitHub Issues]
- ğŸ“– å¼€å‘æ–‡æ¡£: [é¡¹ç›®Wiki]
