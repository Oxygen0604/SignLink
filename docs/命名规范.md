# SignLink 项目命名规范

## 1. 概述

本文档定义了 SignLink 项目的代码命名规范，旨在确保代码的一致性、可读性和可维护性。所有项目成员在编写代码时应严格遵循本规范。

## 2. 文件和目录命名

### 2.1 文件命名

- **JavaScript/TypeScript 文件**：使用**小写驼峰命名法 (camelCase)**
  - 示例：`translationStore.ts`、`videoCapture.ts`、`signHomeScreen.tsx`

- **样式文件**：与对应的组件文件同名，后缀为 `.styles.ts` 或 `.css`
  - 示例：`signHomeScreen.styles.ts`

- **测试文件**：与被测试文件同名，后缀为 `.test.ts` 或 `.spec.ts`
  - 示例：`translationStore.test.ts`

### 2.2 目录命名

- **目录名**：使用**小写蛇形命名法 (snake_case)**
  - 示例：`src/screens/`、`src/utils/`、`src/components/`

- **功能模块目录**：使用**小写蛇形命名法**，清晰表达模块功能
  - 示例：`src/screens/sign_trans_screen/`、`src/utils/video_processing/`

## 3. 变量命名

### 3.1 普通变量

- 使用**小写驼峰命名法 (camelCase)**
  - 示例：`signInput`、`isConnected`、`error`

- 变量名应具有描述性，避免使用缩写（除非是广泛认可的缩写）
  - 好：`signTranslation`、`isLoading`
  - 不好：`st`、`il`

### 3.2 状态变量

- 布尔类型状态变量：使用 `is`、`has`、`should` 等前缀
  - 示例：`isConnected`、`isLoading`、`hasError`

- 数组类型变量：使用复数形式
  - 示例：`images`、`users`、`messages`

### 详细变量名称
- `signInput`：手语输入文本
- `signTranslation`：手语翻译文本
- `isConnected`：是否已连接到 WebSocket 服务器
- `isLoading`：是否正在加载数据
- `hasError`：是否发生错误
- `images`：捕获的图像数组
- `users`：用户数组
- `messages`：消息数组

## 4. 函数命名

### 4.1 普通函数

- 使用**小写驼峰命名法 (camelCase)**
  - 示例：`connect()`、`disconnect()`、`updateSignInput()`

- 函数名应包含动词，清晰表达函数的行为
  - 好：`sendImage()`、`startCapture()`、`stopCamera()`
  - 不好：`image()`、`capture()`、`camera()`

### 4.2 异步函数

- 异步函数命名与普通函数相同，通常包含动词
  - 示例：`sendImage()`、`fetchTranslation()`

### 4.3 事件处理函数

- 使用 `handle` 前缀
  - 示例：`handleConnect()`、`handleDisconnect()`、`handleError()`

## 5. 类和接口命名

### 5.1 类

- 使用**帕斯卡命名法 (PascalCase)**
  - 示例：`SignRecognizer`、`TranslationService`

### 5.2 接口

- 使用**帕斯卡命名法 (PascalCase)**，并以 `I` 前缀（可选，但建议使用）
  - 示例：`TranslationState`（如 translationStore.ts 中）

- 接口名应清晰表达其用途或包含的状态
  - 好：`TranslationState`、`VideoStreamConfig`
  - 不好：`State`、`Config`

## 6. 常量命名

- 使用**大写蛇形命名法 (UPPER_SNAKE_CASE)**
  - 示例：`WS_URL`、`HTTP_API_URL`

- 常量应具有描述性，避免使用缩写
  - 好：`MAX_RECONNECT_ATTEMPTS`、`FRAME_CAPTURE_INTERVAL`
  - 不好：`MAX`、`INTERVAL`

## 7. 注释规范

### 7.1 单行注释

- 使用 `//` 开头，注释内容与代码保持一致的缩进
  - 示例：
    ```typescript
    // 如果已经连接，则不重复连接
    if (ws && ws.readyState === WebSocket.OPEN) {
        console.log('WebSocket 已经连接');
        return;
    }
    ```

### 7.2 多行注释

- 使用 `/* */` 或 JSDoc 风格
  - 示例：
    ```typescript
    /**
     * 通过 HTTP API 发送图像数据（后备方案）
     */
    async function sendImageViaHTTP(imageData: string, setState: (state: any) => void): Promise<boolean> {
        // 函数实现...
    }
    ```

### 7.3 JSDoc 注释

- 为函数、类、接口等添加 JSDoc 注释，说明其用途、参数和返回值
  - 示例：
    ```typescript
    /**
     * 发送图像数据到 WebSocket 或 HTTP API
     * @param imageData 图像的 Base64 数据
     * @returns 是否发送成功
     */
    sendImage: async (imageData: string) => Promise<boolean>,
    ```

## 8. 代码风格

### 8.1 缩进

- 使用 2 个空格进行缩进（与项目中现有代码保持一致）

### 8.2 括号

- 大括号 `{` 应与声明语句在同一行
  - 示例：
    ```typescript
    if (condition) {
        // 代码
    }
    ```
## 9. 最佳实践

### 9.1 一致性

- 保持代码命名的一致性，避免在同一项目中使用多种命名风格

### 9.2 可读性

- 优先考虑代码的可读性，命名应清晰表达变量、函数或类的用途

### 9.3 避免冲突

- 避免使用与 JavaScript/TypeScript 保留字相同的名称

### 9.4 遵循框架规范

- React 组件命名：使用帕斯卡命名法（PascalCase）
  - 示例：`SignHomeScreen`、`VideoCaptureComponent`

- React Hook 命名：使用 `use` 前缀
  - 示例：`useTranslationStore`、`useCameraPermission`

## 10. 示例代码分析

以下是 `translationStore.ts` 中的代码示例，展示了本规范的应用：

```typescript
// 导入语句
import { create } from 'zustand';
import { WS_URL, HTTP_API_URL } from '@env';

// 接口定义（帕斯卡命名法）
interface TranslationState {
    // 状态变量（小写驼峰命名法，布尔类型使用is前缀）
    signInput: string;
    signTranslation: string;
    isConnected: boolean;
    isLoading: boolean;
    error: string | null;
    
    // WebSocket 实例（小写驼峰命名法）
    ws: WebSocket | null;
    
    // Actions（小写驼峰命名法，包含动词）
    connect: () => void;
    disconnect: () => void;
    updateSignInput: (input: string) => void;
    updateSignTranslation: (translation: string) => void;
    setError: (error: string | null) => void;
    sendImage: (imageData: string) => Promise<boolean>;
}

// 创建 store（使用 use 前缀的 Hook 命名）
export const useTranslationStore = create<TranslationState>((set, get) => ({
    // 初始状态
    signInput: '等待手语输入...',
    signTranslation: '等待翻译结果...',
    isConnected: false,
    isLoading: false,
    error: null,
    ws: null,

    // 连接 WebSocket（动词开头的函数名）
    connect: () => {
        const { ws } = get();
        
        // 单行注释
        // 如果已经连接，则不重复连接
        if (ws && ws.readyState === WebSocket.OPEN) {
            console.log('WebSocket 已经连接');
            return;
        }
        
        // 代码实现...
    },
    
    // 其他函数...
}));

// 异步函数（包含动词的函数名）
async function sendImageViaHTTP(imageData: string, setState: (state: any) => void): Promise<boolean> {
    try {
        const response = await fetch(HTTP_API_URL, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                image: imageData,
                format: 'jpeg',
                quality: 80
            }),
        });
        
        // 代码实现...
    } catch (error) {
        console.error('HTTP API 发送图像数据失败:', error);
        return false;
    }
}
```

## 11. 总结

遵循一致的命名规范对于项目的长期维护和团队协作至关重要。本规范基于项目中现有的 `translationStore.ts` 文件，并结合了业界公认的最佳实践。所有团队成员应严格遵守本规范，确保代码的一致性和可读性。

若有任何疑问或建议，欢迎提出讨论并更新本规范。